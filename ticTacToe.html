<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Document</title>
  </head>
  <body>
    <script src="node_modules/jquery/dist/jquery.js"></script>
    <script src="ticTacToe.js"></script>

    <!-- • Using any of the tools you’ve worked with so far, create a game of Tic-Tac-Toe.
    ◦ Create a Tic-Tac-Toe game grid using your HTML element of choice. 
    ◦ When a cell in the grid is clicked, an X or O should appear in that spot depending on whose turn it is.
    ◦ A heading should say whether it is X’s or O’s turn and change with each move made.
    ◦ A button should be available to clear the grid and restart the game.
    ◦ When a player has won, or the board is full and the game results in a draw, a Bootstrap alert or similar Bootstrap component should appear across the screen announcing the winner. -->

    <h1 id="playerDeclaration"></h1>

    <div id="myDIV">
      <div id="div1"></div>
      <div id="div2"></div>
      <div id="div3"></div>
      <div id="div4"></div>
      <div id="div5"></div>
      <div id="div6"></div>
      <div id="div7"></div>
      <div id="div8"></div>
      <div id="div9"></div>
    </div>

    <script>
      // 1. add an eventlistener
      // make a click counter to record the number of clicks use even and odd to determine player
      // 2. id the div that is clicked use the id to determine where to place X or O and to compare boxes for win
      // 3. create a method that compares the value in the rows in winning combos (123, 456, 789, 159, 257) and out put the winner when the 3 values are the same if(getElementbyId(div1).value == getElementById(div2).value && ......
      // 3. or make a variable = to each div and compare with less typing. or use jquery
      // 3. could make a loop that iterates through all the divs and compares[0], [1], [2]; [3], [4], [5]; [6], [7], [8]; [0], [4], [8]; [2], [3], [6];
      // document.addEventListener("click", counter);
      let count = 0;
      let playerNumber = 0;
      let playerXorO = "";
      let clickedIdGlobal = null;
      const allBoxesDivId = [];
      const allBoxesContent = [];
      let XorO = "";
      declarePlayer();

      const container = document.getElementById("myDIV");
      container.addEventListener("click", handleClick);

      function counter() {    
        count++;
        console.log({ count, playerNumber, playerXorO });
        declarePlayer();
        
      }

      function declarePlayer() {
        //this function is called at the end and should display an X to start game this also needs to change
        //  with every click
        // let playerXorO = "";       //commented out for now
        if (count % 2 === 0) {
          //uses the click counter to assign X to even clicks and O to odd clicks
          playerXorO = "X";
          playerNumber = 1;
        } else {
          playerXorO = "O";
          playerNumber = 2;
        }
        document.getElementById("playerDeclaration").innerHTML =
          "Player: " + playerNumber + " Plays an " + playerXorO;

        // console.log(
        //   "count:",
        //   count + "\nplayer#:",
        //   playerNumber + "\nX's or O's",
        //   playerXorO
        // );
      }

      // let count = 0;

      //let clickedBox = "";
      //function idGridBox(){                 //want to id the box that is clicked and use
      // the id to populate the following function to add
      //value to the box

      // JavaScript code

      function handleClick(event) {
        //debugger;
        // if(count < 9 && document.getElementById(clickedIdGlobal).textContent != 'X' && document.getElementById(clickedIdGlobal).textContent != 'O'){
        const clickedElement = event.target;
        const clickedId = clickedElement.getAttribute("id");
        //console.log("Clicked element:", clickedElement);
        console.log("\nThe ID of the box clicked is: ", clickedId);
        // add the X or O to the div that is id'd
        clickedIdGlobal = clickedId;

        addXorO(clickedIdGlobal);
        counter();
        declarePlayer();
        if (count == 9) {
          declareWinner();
        }
     // }
        //console.log("new log of clicked id: " + clickedIdGlobal);
      }

      function addXorO(clickedIdGlobal) {
        let attribute = document.getElementById(clickedIdGlobal).getAttribute;
        //uses the above method to identify the box being clicked,
        // adds an X or O depending on the output in the h1
        if(document.getElementById(clickedIdGlobal).textContent != "X" && document.getElementById(clickedIdGlobal).textContent != 'O'){

        
        //if (document.getElementById(clickedIdGlobal).getAttribute === "") {
        //checks to see if
        //anything is already in the box before adding X or O
        document.getElementById(clickedIdGlobal).innerHTML = playerXorO; //add the current
        let XorO = document.getElementById(clickedIdGlobal).textContent;
        console.log("In the addXorO function, log the content: ", XorO);
        }
      }
      function declareWinner() {
        for (let i = 1; i < 10; i++) {
          let divId = '"div' + [i] + '"';
          allBoxesDivId.push(divId);
          //     allBoxes.push(getElementById(divId).value)// want to iterated through each div in order and push the value into allBoxes array, hoping to use the
          //[i] to create each id example div1, div2, div3....
          console.log(divId);
        }
        for (let i = 0; i < allBoxesDivId.length; i++) {
          //let XorO = document.getElementById(allBoxesContent[i]).textContent;
          allBoxesContent.push(XorO);
          // console.log(XorO);
        }
        //console.log(document.getElementById("div5").textContent);
        // console.log(allBoxesContent[i]);

        //console.log(allBoxesContent);
        //for(let i = 0; i < allBoxes.length; i++){ // don't think I need this loop. just conditionals
        if (
          document.getElementById("div1").textContent ===
            document.getElementById("div2").textContent &&
          document.getElementById("div1").textContent ===
            document.getElementById("div3").textContent
        ) {
          if(document.getElementById("div1").textContent === "X"){
            document.getElementById("playerDeclaration").innerHTML = ("Player 1-X Wins");
          }
          else{
            document.getElementById("playerDeclaration").innerHTML = ("Player 2-O Wins");
          }
          // document.removeEventListener(
          //   "click",
          //   counter,
          //   declarePlayer,
          //   idGridBox,
          //   addXorO
          // );
        } else if (
          document.getElementById("div4").textContent === document.getElementById("div5").textContent &&
          document.getElementById("div6").textContent === document.getElementById("div4").textContent
        ) {
          if(document.getElementById("div4").textContent === "X"){
            document.getElementById("playerDeclaration").innerHTML = ("Player 1-X Wins");
          }
          else{
            document.getElementById("playerDeclaration").innerHTML = ("Player 2-O Wins");
          }
          // document.removeEventListener(
          //   "click",
          //   counter,
          //   declarePlayer,
          //   idGridBox,
          //   addXorO
          // );
        } else if (
          document.getElementById("div7").textContent === document.getElementById("div8").textContent &&
          document.getElementById("div9").textContent === document.getElementById("div7").textContent
        ) {
          if(document.getElementById("div7").textContent === "X"){
            document.getElementById("playerDeclaration").innerHTML = ("Player 1-X Wins");
          }
          else{
            document.getElementById("playerDeclaration").innerHTML = ("Player 2-O Wins");
          }
          // document.removeEventListener(
          //   "click",
          //   counter,
          //   declarePlayer,
          //   idGridBox,
          //   addXorO
          // );
        } else if (
          document.getElementById("div1").textContent === document.getElementById("div5").textContent &&
          document.getElementById("div9").textContent === document.getElementById("div1").textContent
        ) {
          if(document.getElementById("div1").textContent === "X"){
            document.getElementById("playerDeclaration").innerHTML = ("Player 1-X Wins");
          }
          else{
            document.getElementById("playerDeclaration").innerHTML = ("Player 2-O Wins");
          }
          // document.removeEventListener(
          //   "click",
          //   counter,
          //   declarePlayer,
          //   idGridBox,
          //   addXorO
          // );
        } 
        else if (
          document.getElementById("div3").textContent === document.getElementById("div5").textContent &&
          document.getElementById("div7").textContent === document.getElementById("div3").textContent
        ) {
          if(document.getElementById("div3").textContent === "X"){
            document.getElementById("playerDeclaration").innerHTML = ("Player 1-X Wins");
          }
          else{
            document.getElementById("playerDeclaration").innerHTML = ("Player 2-O Wins");
          }
          // document.removeEventListener(
          //   "click",
          //   counter,
          //   declarePlayer,
          //   idGridBox,
          //   addXorO
          // );
        }
      }
      document.getElementById("playerDeclaration").innerHTML = (document.getElementById("div1").textContent);
    </script>
  </body>
</html>
