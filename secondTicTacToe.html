<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Document</title>
  </head>
  <body>
    <script src="node_modules/jquery/dist/jquery.js"></script>
    <!-- <script src="ticTacToe.js"></script> -->

    <!-- • Using any of the tools you’ve worked with so far, create a game of Tic-Tac-Toe.
    ◦ Create a Tic-Tac-Toe game grid using your HTML element of choice. 
    ◦ When a cell in the grid is clicked, an X or O should appear in that spot depending on whose turn it is.
    ◦ A heading should say whether it is X’s or O’s turn and change with each move made.
    ◦ A button should be available to clear the grid and restart the game.
    ◦ When a player has won, or the board is full and the game results in a draw, a Bootstrap alert or similar Bootstrap component should appear across the screen announcing the winner. -->

    <h1 id="playerDeclaration">Player: 1 Plays: X </h1>
    <button onclick="restart()">Restart Game</button>
    

    <div id="myDIV">
      <div id="div1"></div>
      <div id="div2"></div>
      <div id="div3"></div>
      <div id="div4"></div>
      <div id="div5"></div>
      <div id="div6"></div>
      <div id="div7"></div>
      <div id="div8"></div>
      <div id="div9"></div>
    </div>

    <script>
      // 1. add an eventlistener
      // make a click counter to record the number of clicks use even and odd to determine player
      // 2. id the div that is clicked use the id to determine where to place X or O and to compare boxes for win
      // 3. create a method that compares the value in the rows in winning combos (123, 456, 789, 159, 257) and out put the winner when the 3 values are the same if(getElementbyId(div1).value == getElementById(div2).value && ......
      // 3. or make a variable = to each div and compare with less typing. or use jquery
      // 3. could make a loop that iterates through all the divs and compares[0], [1], [2]; [3], [4], [5]; [6], [7], [8]; [0], [4], [8]; [2], [3], [6];
      // document.addEventListener("click", counter);
      let count = 0;
      let playerNumber = 1;
      //let playerXorO = "X";
      let clickedIdGlobal = "";
      //const allBoxesDivId = [];
      //const allBoxesContent = [];
      let XorO = "X";

      document.getElementById("myDIV").addEventListener("click", clickHandler);

      function restart(){
        const restartGame = document.querySelectorAll("div");
	for (var i = 1; i < 10; i++) {
    let id = "div" + i;
    //console.log('restart', id);
    document.getElementById(id).innerHTML = "";
	}

  window.location.reload();//REVIEW - handy handy handy. don't have to clear date to start over
      }
      function declarePlayer() {
        document.getElementById("playerDeclaration").innerHTML =
          "Player: " + playerNumber + " Plays: " + XorO;
      }

      function counter() {
        count++;
      }
      function switchPlayer() {
        if (count % 2 === 0) {
          playerNumber = 1;
          XorO = "X";
        } else {
          playerNumber = 2;
          XorO = "O";
        }
      }
      function clickId() {
        const clickedElement = event.target;
        const clickedId = clickedElement.getAttribute("id");
        clickedIdGlobal = clickedId;
      }
      function addXorO() {
        document.getElementById(clickedIdGlobal).innerHTML = XorO;
        //checkForWinner();
      }
      function checkForWinner() {
        //document.getElementById("div1").textContent != "" || document.getElementById("div2").textContent !="" || document.getElementById("div3").textContent != "" ||
        if (
          (document.getElementById("div1").textContent === "X" &&
            document.getElementById("div2").textContent === "X" &&
            document.getElementById("div3").textContent === "X") ||
          (document.getElementById("div1").textContent === "O" &&
            document.getElementById("div1").textContent === "O" &&
            document.getElementById("div2").textContent === "O" &&
            document.getElementById("div3").textContent === "O")
        ) {
          declareWinner();
        } else {
          //runGame();
        }
      }
      function runGame() {
        counter();
        addXorO();
        declarePlayer();
        checkForWinner();
        switchPlayer();

        console.log(
          count,
          clickedIdGlobal,
          document.getElementById(clickedIdGlobal).textContent
        );
      }
      function clickHandler() {
        clickId();
        if (document.getElementById(clickedIdGlobal).textContent === "") {
          runGame();
          //checkForWinner();
          
        }
      }
      function declareWinner() {
        //want to check if 3 divs have the same letter then use one of the divs to check if it's an X or O
        document.getElementById("myDIV").removeEventListener("click", clickHandler);
        
        if (
          document.getElementById("div1").textContent ===
            document.getElementById("div2").textContent &&
          document.getElementById("div1").textContent ===
            document.getElementById("div3").textContent
        ) {
          if (document.getElementById("div1").textContent === "X") {
            document.getElementById("playerDeclaration").innerHTML =
              "Player 1-X Wins";
          } else {
            document.getElementById("playerDeclaration").innerHTML =
              "Player 2-O Wins";
          }
        } else if (
          document.getElementById("div4").textContent ===
            document.getElementById("div5").textContent &&
          document.getElementById("div6").textContent ===
            document.getElementById("div4").textContent
        ) {
          if (document.getElementById("div4").textContent === "X") {
            document.getElementById("playerDeclaration").innerHTML =
              "Player 1-X Wins";
          } else {
            document.getElementById("playerDeclaration").innerHTML =
              "Player 2-O Wins";
          }
        } else if (
          document.getElementById("div7").textContent ===
            document.getElementById("div8").textContent &&
          document.getElementById("div9").textContent ===
            document.getElementById("div7").textContent
        ) {
          if (document.getElementById("div7").textContent === "X") {
            document.getElementById("playerDeclaration").innerHTML =
              "Player 1-X Wins";
          } else {
            document.getElementById("playerDeclaration").innerHTML =
              "Player 2-O Wins";
          }
        } else if (
          document.getElementById("div1").textContent ===
            document.getElementById("div5").textContent &&
          document.getElementById("div9").textContent ===
            document.getElementById("div1").textContent
        ) {
          if (document.getElementById("div1").textContent === "X") {
            document.getElementById("playerDeclaration").innerHTML =
              "Player 1-X Wins";
          } else {
            document.getElementById("playerDeclaration").innerHTML =
              "Player 2-O Wins";
          }
        } else if (
          document.getElementById("div3").textContent ===
            document.getElementById("div5").textContent &&
          document.getElementById("div7").textContent ===
            document.getElementById("div3").textContent
        ) {
          if (document.getElementById("div3").textContent === "X") {
            document.getElementById("playerDeclaration").innerHTML =
              "Player 1-X Wins";
          } else {
            document.getElementById("playerDeclaration").innerHTML =
              "Player 2-O Wins";
          }
        }
      }
    </script>
  </body>
</html>
